<div class="page">
    <%#-------------------------------------------- Header section --------------------------------------------%>
    <header style="background-image: url('<%= Image.find(1).url %>');">
        <div class="top">
            <h1>Exotic Euro</h1>
        </div>
        <div class="bottom">
            <a>Luxury Made Affordable,</a>
            <a>Just for You.</a>
        </div>
    </header>
    <%#--------------------------------------------------------------------------------------------------------%>

    <div class="gradient-overlay"></div>

    <%#-------------------------------------------- Steps section ---------------------------------------------%>

    <div class = "step-by-step">
        <div class = "section-header">
            <h1>Step by Step Process</h1>
            <a>We make luxury affordable: from search to repair, we handle everything for you.</a>
        </div>
        <div class = "step">
            <div class = "step-text">
                <p>We discuss the the model of your car, and the initial budget.</p>
            </div>
        </div>
        <div class = "step">
            <div class = "step-text">
                <p>Our Specialists would find and inspect the requested car to determine the cost of repairs. </p>
            </div>
        </div>
        <div class = "step">
            <div class = "step-text">
                <p>Our Mechanics would repair the car to factory specs. </p>
            </div>
        </div>
        <div class = "step">
            <div class = "step-text">
                <p>Our Team delivers your dream car for the agreed budget. </p>
            </div>
        </div>
        <%= link_to "Book Consoltation",contact_path, class: "book-btn"  %>
            
      
    </div>

    <%#--------------------------------------------------------------------------------------------------------%>


    <%#-------------------------------------------- Contact section ---------------------------------------------%>
    <div class = "contact-section">
        <div class = "section-header">
            <h1> Where to Find Us</h1>
            <a>Stop by, give us a call, or send a message — we're here to help.</a>
        </div>

        <% if @user.location.present? %>
            <%= render partial: 'index/contact/contact_card_with_location', locals: { location: @user.location } %>
        <% else %>
           <%=  render partial: 'index/contact/contact_card', locals: { location: @user.location }%>
        <% end %>
    </div>

    <%#--------------------------------------------------------------------------------------------------------%>



    <%#--------------------------------------------- Credibility Section -------------------------------------%>
        <div class = "credibility-section">
            <div class = "section-header">
                <h1> What our clients say</h1>
                <a> We are proud of our work and our clients.</a>
            </div>
           
            
            <div class="before-carousel">
                <div class="before-car-slide" >
                    <div class="car-dmg car1" style = "background-image: url('<%= Image.find_by(name: "before_car_one").url %>'); "></div>
                    <div class="car-dmg car2" style = "background-image: url('<%= Image.find_by(name: "before_car_two").url %>'); "></div>
                    <div class="car-dmg car3" style = "background-image: url('<%= Image.find_by(name: "before_car_three").url %>'); "></div>
                    <div class="car-dmg car4" style = "background-image: url('<%= Image.find_by(name: "before_car_four").url %>'); "></div>
                    <div class="car-dmg car5" style = "background-image: url('<%= Image.find_by(name: "before_car_five").url %>'); "></div>
                </div>
            </div>
            
            <div class="testimony-section">
                <div class="testimony-outer active">
                    <%= render partial: 'index/testimonies/testimony_1' %>
                </div>
                <div class="testimony-outer">
                    <%= render partial: 'index/testimonies/testimony_2' %>
                </div>
                <div class="testimony-outer">
                    <%= render partial: 'index/testimonies/testimony_3' %>
                </div>
                <div class="testimony-outer">
                    <%= render partial: 'index/testimonies/testimony_4' %>
                </div>
            </div>

          
            
            <div class="after-carousel">
                <div class="after-car-slide">
                    <div class="car-fix car1-mirror" style = "background-image: url('<%= Image.find_by(name: "after_car_one").url %>'); "></div>
                    <div class="car-fix car2-mirror" style = "background-image: url('<%= Image.find_by(name: "after_car_two").url %>'); "></div>
                    <div class="car-fix car3-mirror" style = "background-image: url('<%= Image.find_by(name: "after_car_three").url %>'); "></div>
                    <div class="car-fix car4-mirror" style = "background-image: url('<%= Image.find_by(name: "after_car_four").url %>'); "></div>
                    <div class="car-fix car5-mirror" style = "background-image: url('<%= Image.find_by(name: "after_car_five").url %>'); "></div>
                </div>
            </div>
        </div>

    <%#--------------------------------------------------------------------------------------------------------%>

    <%#-------------------------------------------- Featured section ---------------------------------------------%>
    <div class = "featured-section">
            <div class = "section-header" > 
                <h1> Ready-to-Go Deals </h1>
                <a> Check out our collection of existing ehicles.</a>
            </div>

            <% if @feature.present?%>
                <h2> Featured:</h2>
                
                <div class = "featured-car" style = "background-image: url('<%= @feature.url %>');">
                    <div class = "text-gradiant"></div>

                    <div class = "featured-text-content">
                        <h2> <%= @car.car_make%> <%= @car.car_model%></h2>
                        <div class = "featured-details">
                            <p> <%= number_to_currency(@car.price)%></p>
                            <div class = "featured-details-cta">
                                <%= link_to 'Details', car_path(car_id: @car.id), style: "color: white; text-decoration: none;" %>
                            </div>
                        </div>
                    </div>
                </div>
            <% else %>
                <div class = "no-cars">
                    <p> "We're fresh out of vehicles right now!"</p>
                    <p> Check back soon — new deals are always on the way. </p>    
                </div>
            <% end %>

    </div>

        <%#--------------------------------------------------------------------------------------------------------%>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const testimonials = document.querySelectorAll(".testimony-outer");
    if (testimonials.length === 0) return; // Prevent error if selector is wrong

    let index = 0;

    setInterval(() => {
      testimonials[index].classList.remove("active");
      index = (index + 1) % testimonials.length;
      testimonials[index].classList.add("active");
    }, 5000);
  });
</script>


